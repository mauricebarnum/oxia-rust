# Goal: Fast compiles, but fast enough runtime to not be frustrated.
[profile.dev]
opt-level = 1       # Basic optimizations so async code isn't glacial
debug = "full"      # Maximum debug info for IDEs and GDB/LLDB
incremental = true  # Essential for fast "edit-compile-test" cycles
codegen-units = 256

# Optimize dependencies even in debug mode
[profile.dev.package."*"]
opt-level = 3 # Your code stays debuggable; tokio/hyper/serde run at 100% speed

# Goal: Maximum runtime performance.  Matches workspace [profile.release] so that
# cargo-chef pre-compiles release deps with fingerprints valid for CI release builds.
[profile.release]
opt-level = 3
lto = true              # fat LTO: full cross-crate optimization (slower build, faster binary)
codegen-units = 1       # single unit: max inlining opportunity
panic = "unwind"
debug = true            # full debug info...
split-debuginfo = "packed" # ...packed into a separate .dwp/.dSYM...
strip = "debuginfo"        # ...and stripped from the binary itself
debug-assertions = false
overflow-checks = false
incremental = false
rpath = false

